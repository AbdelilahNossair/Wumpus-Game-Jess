(deffunction run-script-for-evaluation ()
  (bind ?n 385) ;; number of caves to evaluate
  (bind ?i 0)

  (batch "setup.jess") ;;this loads necessary definitions and facts
  (while (< ?i ?n)
      
    (reset) ;; Clears the fact base in preparation for a new simulation run
    (batch (str-cat "cave" ?i ".jess")) ;; Load the specific cave configuration
    (batch "logic.jess") ;; Load and run the simulation logic (rules needed for the simulation)
    (run) ;; Executes the loaded rules

    ;; Initialize variables to hold the state of the hunter
    (bind ?alive "unknown")
    (bind ?arrows "unknown")
    (bind ?wumpus-shot "unknown")

    (do-for-all-facts ((?h hunter)) TRUE
      ;; Extract the values for 'alive', 'arrows', and 'wumpus-shot'.
      (bind ?alive (if (?h getSlotValue alive) then "yes" else "no"))
      (bind ?arrows (?h getSlotValue arrows))
      (bind ?wumpus-shot (if (?h getSlotValue wumpus-shot) then "yes" else "no"))
    )

    (printout t "Evaluation completed for cave " ?i ". Alive: " ?alive ", Arrows: " ?arrows ", Wumpus Killed: " ?wumpus-shot crlf)

    (bind ?i (+ ?i 1))
  )
)

(run-script-for-evaluation)